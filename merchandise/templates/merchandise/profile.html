<!-- ===================== profile.html ===================== -->
{% load static %}

{% block title %}My Profile | Him Village Prahari{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
<link rel="stylesheet" href="{% static 'merchandise/css/profile.css' %}">
{% endblock %}

{% block content %}
<div class="profile-page">
    <!-- Hero Section with Mountain Background -->
    <div class="profile-hero">
        <div class="mountain-overlay"></div>
        <div class="hero-content">
            <div class="avatar-large">
                <i class="fas fa-user-circle"></i>
            </div>
            <h1 class="welcome-text">
                Welcome back, 
                {% if request.user.profile and request.user.profile.full_name %}
                    {{ request.user.profile.full_name|title }}
                {% else %}
                    {{ request.user.username|title }}
                {% endif %}
            </h1>
            <p class="tagline">
                <i class="fas fa-mountain"></i> Guardian of the Mountains
            </p>
        </div>
    </div>

    <div class="profile-wrapper">
        <aside class="profile-sidebar">
            <div class="user-card">
                <div class="avatar">
                    <i class="fas fa-user"></i>
                </div>
                <h3>
                    {% if request.user.profile and request.user.profile.full_name %}
                        {{ request.user.profile.full_name }}
                    {% else %}
                        {{ request.user.username }}
                    {% endif %}
                </h3>
                <p class="user-email">{{ request.user.email }}</p>
                <span class="member-badge">
                    <i class="fas fa-shield-alt"></i> Prahari Member
                </span>
            </div>

            <ul class="menu">
                <li class="active">
                    <i class="fas fa-user"></i> 
                    <span>Profile Information</span>
                </li>
                <li>
                    <i class="fas fa-box"></i> 
                    <span>My Orders</span>
                </li>
                <li>
                    <i class="fas fa-map-marker-alt"></i> 
                    <span>Manage Addresses</span>
                </li>
                <li>
                    <i class="fas fa-heart"></i> 
                    <span>Wishlist</span>
                </li>
                <li>
                    <i class="fas fa-lock"></i> 
                    <span>Change Password</span>
                </li>
                <li>
                    <i class="fas fa-bell"></i> 
                    <span>Notifications</span>
                </li>
                <li class="logout" onclick="confirmLogout()">
                    <i class="fas fa-sign-out-alt"></i> 
                    <span>Logout</span>
                </li>
            </ul>
        </aside>

        <main class="profile-content">
            <!-- Messages Section -->
            {% if messages %}
                <div class="messages-container">
                    {% for message in messages %}
                        <div class="alert alert-{{ message.tags }}">
                            <i class="fas fa-check-circle"></i>
                            <span>{{ message }}</span>
                            <button class="close-alert" onclick="this.parentElement.remove()">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                    {% endfor %}
                </div>
            {% endif %}

            <div class="content-header">
                <h2>
                    <i class="fas fa-user-edit"></i> Personal Information
                </h2>
                <p class="subtitle">Manage your account details and preferences</p>
            </div>

            <form class="profile-form" method="post" action="{% url 'merchandise:update_profile' %}">
                {% csrf_token %}
                
                <div class="form-section">
                    <h3 class="section-title">
                        <i class="fas fa-id-card"></i> Basic Information
                    </h3>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label>
                                <i class="fas fa-user"></i> Full Name
                            </label>
                            <input 
                                type="text" 
                                name="full_name" 
                                value="{% if request.user.profile %}{{ request.user.profile.full_name }}{% endif %}" 
                                placeholder="Enter your full name"
                                required
                            />
                        </div>
                        <div class="form-group">
                            <label>
                                <i class="fas fa-envelope"></i> Email Address
                            </label>
                            <input 
                                type="email" 
                                value="{{ request.user.email }}" 
                                disabled 
                                class="disabled-input"
                            />
                            <small class="helper-text">Email cannot be changed</small>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>
                                <i class="fas fa-phone"></i> Mobile Number
                            </label>
                            <input 
                                type="text" 
                                name="mobile" 
                                value="{% if request.user.profile %}{{ request.user.profile.mobile }}{% endif %}" 
                                placeholder="Enter your mobile number"
                            />
                        </div>
                        <div class="form-group">
                            <label>
                                <i class="fas fa-venus-mars"></i> Gender
                            </label>
                            <select name="gender">
                                <option value="">Select Gender</option>
                                <option value="male">Male</option>
                                <option value="female">Female</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="form-section">
                    <h3 class="section-title">
                        <i class="fas fa-map-marked-alt"></i> Location Details
                    </h3>
                    
                    <div class="form-row">
                        <div class="form-group full-width">
                            <label>
                                <i class="fas fa-home"></i> Address
                            </label>
                            <input 
                                type="text" 
                                name="address" 
                                placeholder="Enter your address"
                            />
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>
                                <i class="fas fa-city"></i> City
                            </label>
                            <input 
                                type="text" 
                                name="city" 
                                placeholder="Your city"
                            />
                        </div>
                        <div class="form-group">
                            <label>
                                <i class="fas fa-mail-bulk"></i> Postal Code
                            </label>
                            <input 
                                type="text" 
                                name="postal_code" 
                                placeholder="PIN code"
                            />
                        </div>
                    </div>
                </div>

                <div class="form-actions">
                    <button type="submit" class="save-btn">
                        <i class="fas fa-save"></i> Save Changes
                    </button>
                    <button type="reset" class="reset-btn">
                        <i class="fas fa-undo"></i> Reset
                    </button>
                </div>
            </form>

            <!-- Account Stats Section -->
            <div class="account-stats">
                <div class="stat-card">
                    <i class="fas fa-shopping-bag"></i>
                    <div class="stat-info">
                        <h4>0</h4>
                        <p>Total Orders</p>
                    </div>
                </div>
                <div class="stat-card">
                    <i class="fas fa-heart"></i>
                    <div class="stat-info">
                        <h4>0</h4>
                        <p>Wishlist Items</p>
                    </div>
                </div>
                <div class="stat-card">
                    <i class="fas fa-map-marker-alt"></i>
                    <div class="stat-info">
                        <h4>0</h4>
                        <p>Saved Addresses</p>
                    </div>
                </div>
            </div>
        </main>
    </div>
</div>

<!-- Logout Confirmation Modal -->
<div id="logoutModal" class="modal">
    <div class="modal-content">
        <div class="modal-icon">
            <i class="fas fa-sign-out-alt"></i>
        </div>
        <h3>Confirm Logout</h3>
        <p>Are you sure you want to logout from your account?</p>
        <div class="modal-actions">
            <button class="btn-cancel" onclick="closeLogoutModal()">
                <i class="fas fa-times"></i> Cancel
            </button>
            <a href="{% url 'merchandise:logout' %}" class="btn-logout">
                <i class="fas fa-sign-out-alt"></i> Yes, Logout
            </a>
        </div>
    </div>
</div>

{% endblock %}

{% block extra_js %}
<script src="{% static 'merchandise/js/profile.js' %}"></script>
{% endblock %}