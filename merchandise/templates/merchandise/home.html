{% extends "base.html" %}
{% load static %}

{% block title %}Merch Home | Waste to Wonder{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'merchandise/css/home.css' %}"> 
  <!-- Fonts: Inter for UI, Playfair Display for headlines -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&family=Playfair+Display:wght@600;700&display=swap" rel="stylesheet">
{% endblock %}


{% block content %}
    <main>
      <!-- Featured Products -->
      <section id="products" class="products container">
        <div class="section-head text-center">
          <span class="section-tag">Handcrafted with Purpose</span>
          <h2>Explore Our Collection</h2>
          <p>Each piece tells a story of sustainability and artisanal craftsmanship</p>
        </div>
        <div class="product-grid" id="product-grid">
          <!-- product cards inserted by JS -->
        </div>
        <div class="products-footer">
         <a href="{% url 'merchandise:products' %}">
           <button class="btn accent view-all">
            <span>View All Products</span>
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M5 12h14m-7-7l7 7-7 7"/>
            </svg>
          </button>
         </a>
        </div>
      </section>

      
      <!-- Product Stories -->
      <section id="stories" class="container stories">
        <div class="section-head text-center">
          <span class="story-tag">Stories</span>
          <h2>Our Team in Action</h2>
          <p class="story-lead">Stories from cleanliness drives, campaigns, and community-led change</p>
        </div>
        <div class="story-grid">
          <article class="story-card">
            <div class="story-image">
              <img src="{% static 'merchandise/assets/images/communitywork1.jpeg' %}" alt="Stories from cleanliness drives, campaigns, and community-led change" loading="lazy">
              <div class="story-badge">Cleanliness Drive</div>
            </div>
            <div class="story-content">
              <h3>Community Clean-Up Team</h3>
                <p class="story-quote">
                  "Real change begins on the ground — when communities come together to protect their surroundings."
                </p>
              <div class="story-stats">
                <div class="stat">
                  <svg viewBox="0 0 24 24" width="18" height="18" stroke="currentColor" fill="none">
                    <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0118 0z"></path>
                    <circle cx="12" cy="10" r="3"></circle>
                  </svg>
                  <span>Ganga Bhogpur Village</span>
                </div>
              </div>
            </div>
          </article>

          <article class="story-card">
            <div class="story-image">
              <img src="{% static 'merchandise/assets/images/communitywork2.jpeg' %}" alt="Awareness Campaign" loading="lazy">
              <div class="story-badge">Awareness Campaign</div>
            </div>
            <div class="story-content">
              <h3>Waste Awareness Campaigns</h3>
              <p class="story-quote">
                "Awareness is the first step toward responsibility. Our campaigns turn learning into action."
              </p>
              <div class="story-stats">
                <div class="stat">
                  <svg viewBox="0 0 24 24" width="18" height="18" stroke="currentColor" fill="none">
                    <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0118 0z"></path>
                    <circle cx="12" cy="10" r="3"></circle>
                  </svg>
                  <span>Government Primary School, Gangdaspur</span>
                </div>
              </div>
            </div>
          </article>

          <article class="story-card">
            <div class="story-image">
              <img src="{% static 'merchandise/assets/images/communitywork3.jpeg' %}" alt="Students creating art from recycled materials" loading="lazy">
              <div class="story-badge">Youth Initiative</div>
            </div>
            <div class="story-content">
              <h3>Students for Earth</h3>
              <p class="story-quote">"When students create with their own hands, learning turns into purpose and ideas turn into impact."</p>
              <div class="story-stats">
                <div class="stat">
                  <svg viewBox="0 0 24 24" width="18" height="18" stroke="currentColor" fill="none">
                    <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0118 0z"></path>
                    <circle cx="12" cy="10" r="3"></circle>
                  </svg>
                  <span>Government Primary School</span>
                </div>
              </div>
            </div>
          </article>
        </div>
      </section>

      <!-- Donation (large) -->
      <section id="donate" class="donation-large" aria-label="Donate to support community workshops">
        <div class="donation-bg" aria-hidden="true"></div>
        <div class="container donation-large-inner">
          <div class="donation-copy">
            <span class="donation-tag">Make a Lasting Impact</span>
            <h2>Transform Lives Through Art</h2>
            <p class="donation-lead">Your contribution empowers artisans, funds workshops, and helps turn waste into opportunity. Every donation creates ripples of positive change in our communities.</p>
            
            <div class="donation-impact">
              <div class="impact-item">
                <span class="impact-number">₹50</span>
                <span class="impact-text">Provides art supplies for one child</span>
              </div>
              <div class="impact-item">
                <span class="impact-number">₹100</span>
                <span class="impact-text">Supports an artisan's daily materials</span>
              </div>
              <div class="impact-item">
                <span class="impact-number">₹200</span>
                <span class="impact-text">Funds a workshop training session</span>
              </div>
            </div>

            <div class="donation-ctas">
              <button id="donate-now" class="btn accent" onclick="openDonationModal()">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/>
                </svg>
                <span>Donate Now</span>
              </button>
            </div>
          </div>
        </div>
      </section>
    </main>

    <!-- Donation Modal -->
        <div id="donation-modal" class="donation-modal hidden">
          <div class="donation-modal-overlay" onclick="closeDonationModal()"></div>

          <div class="donation-modal-content">
            <button class="donation-close-btn" onclick="closeDonationModal()">✕</button>

            <h2>Support Our Work</h2>
            <p class="donation-subtext">
              Choose an amount to support cleanliness drives and community initiatives.
            </p>

            <!-- Amount Options -->
            <div class="donation-amounts">
              <button class="amount-btn" onclick="selectAmount(10, this)">₹10</button>
              <button class="amount-btn" onclick="selectAmount(50, this)">₹50</button>
              <button class="amount-btn" onclick="selectAmount(100, this)">₹100</button>
              <button class="amount-btn" onclick="selectAmount(500, this)">₹500</button>
            </div>

            <!-- Custom Amount -->
            <div class="custom-amount">
              <label for="customAmount">Custom Amount (₹)</label>
              <input
                type="number"
                id="customAmount"
                placeholder="Enter amount"
                oninput="selectCustomAmount()"
                min="1"
              />
            </div>
            <p class="selected-amount">
              Selected Amount: <strong id="selectedAmount">₹0</strong>
            </p>

            <!-- Proceed -->
            <button class="btn accent donate-proceed-btn" onclick="proceedToDonate()">
              <span class="btn-text">Proceed to Donate</span>
            </button>
          </div>
        </div>
{% endblock %}

{% block extra_js %}
<!-- IMPORTANT: Load products.js FIRST to define MOCK_PRODUCTS -->
<script src="{% static 'merchandise/js/products.js' %}"></script>
<script src="{% static 'merchandise/js/cart.js' %}"></script>
<script src="{% static 'merchandise/js/home.js' %}"></script>
{% endblock %}