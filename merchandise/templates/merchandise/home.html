{% extends "base.html" %}
{% load static %}

{% block title %}Merch Home | Waste to Wonder{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'merchandise/css/home.css' %}"> 
  <!-- Fonts: Inter for UI, Playfair Display for headlines -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&family=Playfair+Display:wght@600;700&display=swap" rel="stylesheet">
{% endblock %}


{% block content %}
    <main>
      <!-- HERO -->
      <section id="hero" class="hero">
        <div class="hero-carousel" id="hero-carousel">
          <button class="carousel-btn prev" id="hero-prev" aria-label="Previous slide">‹</button>
          <button class="carousel-btn next" id="hero-next" aria-label="Next slide">›</button>
          <div class="slides">
            <div class="slide active" data-index="0">
              <img src="{% static 'merchandise/assets/images/bg-craft1.jpg' %}" alt="first bg image showing craft items">
              <div class="slide-overlay"></div>
              <div class="slide-content container">
                <div class="slide-text">
                  <h1>Turning Waste into Wonder</h1>
                  <p>Every Product Saves a Story from the Landfill</p>
                </div>
              </div>
            </div>
            <div class="slide" data-index="1">
              <img src="{% static 'merchandise/assets/images/bg-craft2.jpg' %}" alt="second bg image showing cycle in flowers">
              <div class="slide-overlay"></div>
              <div class="slide-content container">
                <div class="slide-text">
                  <h1>Creativity Born from Discarded Things</h1>
                  <p>Handcrafted treasures from recycled materials.</p>
                </div>
              </div>
            </div>
            <div class="slide" data-index="2">
              <img src="{% static 'merchandise/assets/images/bg-craft3.jpg' %}" alt="third bg image tyre">
              <div class="slide-overlay"></div>
              <div class="slide-content container">
                <div class="slide-text">
                  <h1>Art for Awareness</h1>
                  <p>Discover the beauty of sustainable craftsmanship.</p>
                </div>
              </div>
            </div>
          </div>
          <div class="slide-indicators" id="slide-indicators">
            <button class="indicator active" data-index="0" aria-label="Go to slide 1"></button>
            <button class="indicator" data-index="1" aria-label="Go to slide 2"></button>
            <button class="indicator" data-index="2" aria-label="Go to slide 3"></button>
          </div>
        </div>
      </section>


      <!-- Featured Products -->
      <section id="products" class="products container">
        <div class="section-head text-center">
          <span class="section-tag">Handcrafted with Purpose</span>
          <h2>Explore Our Collection</h2>
          <p>Each piece tells a story of sustainability and artisanal craftsmanship</p>
        </div>
        <div class="product-grid" id="product-grid">
          <!-- product cards inserted by JS -->
        </div>
        <div class="products-footer">
         <a href="{% url 'merchandise:products' %}">
           <button class="btn accent view-all">
            <span>View All Products</span>
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M5 12h14m-7-7l7 7-7 7"/>
            </svg>
          </button>
         </a>
        </div>
      </section>

      <!-- NGO Intro -->
      <section id="about" class="container ngo-intro">
        <div class="mission-tag">Our Journey of Impact</div>
        <div class="ngo-inner">
          <div class="ngo-text">
            <h2>Our Mission</h2>
            <div class="mission-content">
              <p class="mission-lead">
                HVEP partners with local artisans and communities to transform waste into beautiful, usable products. Every purchase supports livelihoods and reduces landfill waste.
              </p>
              <div class="mission-stats">
                <div class="stat-item">
                  <span class="stat-number">5000+</span>
                  <span class="stat-label">Artisans Empowered</span>
                </div>
                <div class="stat-item">
                  <span class="stat-number">12 tons</span>
                  <span class="stat-label">Waste Recycled Monthly</span>
                </div>
                <div class="stat-item">
                  <span class="stat-number">25+</span>
                  <span class="stat-label">Community Workshops</span>
                </div>
              </div>
            </div>
          </div>
          <div class="ngo-visual">
            <div class="image-grid">
              <img src="https://media.licdn.com/dms/image/v2/D5622AQGGMOIHtLa4ag/feedshare-shrink_800/B56Zvr4nQLGYAg-/0/1769189045512?e=1770854400&v=beta&t=IyPTcqrKsZMHr7APsI0ATu_A8DPIPq-3TF24A6vUzIE" alt="community volunteers" class="main-image">
              <img src="https://media.licdn.com/dms/image/v2/D4D22AQEg8zUmIkygHQ/feedshare-shrink_2048_1536/B4DZndvfVKH4Aw-/0/1760361856141?e=1770854400&v=beta&t=bIN6Ag3Qs7iE72nCnMMo9P6uc7pX1KgBnMlTVRvzNQc" alt="community volunteers" class="secondary-image">
              <img src="https://media.licdn.com/dms/image/v2/D4D22AQFaDXr-OowvVA/feedshare-shrink_2048_1536/B4DZQxXu_LG0Ao-/0/1735995099579?e=1770854400&v=beta&t=BKcVrou5XC8w8WlQcBrjLyftHMDxjQF8OO-nTCl2O-s" alt="community volunteers" class="secondary-image">
            </div>
          </div>
        </div>
      </section>

      <!-- Product Stories -->
      <section id="stories" class="container stories">
        <div class="section-head text-center">
          <span class="story-tag">Stories</span>
          <h2>Our Team in Action</h2>
          <p class="story-lead">Stories from cleanliness drives, campaigns, and community-led change</p>
        </div>
        <div class="story-grid">
          <article class="story-card">
            <div class="story-image">
              <img src="https://media.licdn.com/dms/image/v2/D5612AQHmxTQqw9xYvg/article-cover_image-shrink_720_1280/B56ZuEQbUTGwAM-/0/1767450465810?e=1770854400&v=beta&t=eb1pzBYR5Th9-o4s47nUSQ9Xl3P7GdbicvqgzntTAdo" alt="Anjali and her community crafting with recycled bottles" loading="lazy">
              <div class="story-badge">Cleanliness Drive</div>
            </div>
            <div class="story-content">
              <h3>Community Clean-Up Team</h3>
                <p class="story-quote">
                  "Real change begins on the ground — when communities come together to protect their surroundings."
                </p>
              <div class="story-stats">
                <div class="stat">
                  <svg viewBox="0 0 24 24" width="18" height="18" stroke="currentColor" fill="none">
                    <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0118 0z"></path>
                    <circle cx="12" cy="10" r="3"></circle>
                  </svg>
                  <span>Ganga Bhogpur Village</span>
                </div>
              </div>
            </div>
          </article>

          <article class="story-card">
            <div class="story-image">
              <img src="https://media.licdn.com/dms/image/v2/D5622AQFC5Or216rtVA/feedshare-shrink_2048_1536/B56Zt.ueC5KgAw-/0/1767357671192?e=1770854400&v=beta&t=rjgyyVs5-Z_RxhJgSutD33BD98KoRS_-_zAvWIUIgSY" alt="Ravi working in his tire upcycling workshop" loading="lazy">
              <div class="story-badge">Awareness Campaign</div>
            </div>
            <div class="story-content">
              <h3>Waste Awareness Campaigns</h3>
              <p class="story-quote">
                "Awareness is the first step toward responsibility. Our campaigns turn learning into action."
              </p>
              <div class="story-stats">
                <div class="stat">
                  <svg viewBox="0 0 24 24" width="18" height="18" stroke="currentColor" fill="none">
                    <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0118 0z"></path>
                    <circle cx="12" cy="10" r="3"></circle>
                  </svg>
                  <span>Government Primary School, Gangdaspur</span>
                </div>
              </div>
            </div>
          </article>

          <article class="story-card">
            <div class="story-image">
              <img src="https://himvillageprahari.org/gallery/events%20(23).jpeg" alt="Students creating art from recycled materials" loading="lazy">
              <div class="story-badge">Youth Initiative</div>
            </div>
            <div class="story-content">
              <h3>Students for Earth</h3>
              <p class="story-quote">"When students create with their own hands, learning turns into purpose and ideas turn into impact."</p>
              <div class="story-stats">
                <div class="stat">
                  <svg viewBox="0 0 24 24" width="18" height="18" stroke="currentColor" fill="none">
                    <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0118 0z"></path>
                    <circle cx="12" cy="10" r="3"></circle>
                  </svg>
                  <span>Government Primary School</span>
                </div>
              </div>
            </div>
          </article>
        </div>
      </section>

      <!-- Donation (large) -->
      <section id="donate" class="donation-large" aria-label="Donate to support community workshops">
        <div class="donation-bg" aria-hidden="true"></div>
        <div class="container donation-large-inner">
          <div class="donation-copy">
            <span class="donation-tag">Make a Lasting Impact</span>
            <h2>Transform Lives Through Art</h2>
            <p class="donation-lead">Your contribution empowers artisans, funds workshops, and helps turn waste into opportunity. Every donation creates ripples of positive change in our communities.</p>
            
            <div class="donation-impact">
              <div class="impact-item">
                <span class="impact-number">₹50</span>
                <span class="impact-text">Provides art supplies for one child</span>
              </div>
              <div class="impact-item">
                <span class="impact-number">₹100</span>
                <span class="impact-text">Supports an artisan's daily materials</span>
              </div>
              <div class="impact-item">
                <span class="impact-number">₹200</span>
                <span class="impact-text">Funds a workshop training session</span>
              </div>
            </div>

            <div class="donation-ctas">
              <button id="donate-now" class="btn accent" onclick="openDonationModal()">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/>
                </svg>
                <span>Donate Now</span>
              </button>
            </div>
          </div>
        </div>
      </section>
    </main>

    <!-- Donation Modal -->
        <div id="donation-modal" class="donation-modal hidden">
          <div class="donation-modal-overlay" onclick="closeDonationModal()"></div>

          <div class="donation-modal-content">
            <button class="donation-close-btn" onclick="closeDonationModal()">✕</button>

            <h2>Support Our Work</h2>
            <p class="donation-subtext">
              Choose an amount to support cleanliness drives and community initiatives.
            </p>

            <!-- Amount Options -->
            <div class="donation-amounts">
              <button class="amount-btn" onclick="selectAmount(10, this)">₹10</button>
              <button class="amount-btn" onclick="selectAmount(50, this)">₹50</button>
              <button class="amount-btn" onclick="selectAmount(100, this)">₹100</button>
              <button class="amount-btn" onclick="selectAmount(500, this)">₹500</button>
            </div>

            <!-- Custom Amount -->
            <div class="custom-amount">
              <label for="customAmount">Custom Amount (₹)</label>
              <input
                type="number"
                id="customAmount"
                placeholder="Enter amount"
                oninput="selectCustomAmount()"
                min="1"
              />
            </div>
            <p class="selected-amount">
              Selected Amount: <strong id="selectedAmount">₹0</strong>
            </p>

            <!-- Proceed -->
            <button class="btn accent donate-proceed-btn" onclick="proceedToDonate()">
              <span class="btn-text">Proceed to Donate</span>
            </button>
          </div>
        </div>
{% endblock %}

{% block extra_js %}
<!-- IMPORTANT: Load products.js FIRST to define MOCK_PRODUCTS -->
<script src="{% static 'merchandise/js/products.js' %}"></script>
<script src="{% static 'merchandise/js/cart.js' %}"></script>
<script src="{% static 'merchandise/js/home.js' %}"></script>
{% endblock %}